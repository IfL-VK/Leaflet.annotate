<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Leaflet.annotate plugin</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width">
    <meta name="author" content="Malte Reißig">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <img alt="Leaflet.annotate Logo Graphic" title="Shiny Leaflet.annotate logo graphic"
          src="https://raw.githubusercontent.com/mukil/Leaflet.annotate/master/docs/leaflet.annotate-logo-v1.png">
        <p>A Leaflet plugin to publish geographic maps in HTML documents machine readable through generating Schema.org in the Microdata Syntax.</p>
        <p class="view">
            <a href="https://github.com/ifl-geovis/Leaflet.annotate">View the Project on GitHub <small>ifl-geovis/Leaflet.annotate</small></a>
        </p>
        <ul>
          <li><a href="https://github.com/ifl-geovis/Leaflet.annotate/releases">Download<strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/ifl-geovis/Leaflet.annotate/releases">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/mukil/Leaflet.annotate">Fork On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
      
        <h1>Introduction</h1>

        <p>
          This plugin extends the options for the LeafletJS Standard API elements <b>Marker</b>, <b>CircleMarker</b>, <b>Popup</b>, <b>ImageOverlay</b> and <b>GeoJSON</b> so you can publish these elements in HTML semantically annotated and with machine readable geo markup. While there is quite some effort already around the development of new geospatial data catalogs (which are awesome) this plugin turns the focus onto geographic web maps. Acknowleding that, de-facto, some maps already are data catalogs themselves, they are just not that well represented in HTML so that other programs can extract and re-use the information people collect in them.

          Semantic markup here means that (a) search engines and other applications will be able to understand what is your map about and (b) which parts of the world your map (through all its elements) deals with (spatial coverage). Using this plugin you will contribute to make some of the most important geographic maps and web map elements published by the year 2025 on the web in HTML
        </p>

        <ul>
            <li>identifiable and addressable for others,</li>
            <li>searchable for users through search engines,</li>
            <li>re-usable and interoperable for application developers,</li>
            <li>real collections of linked data and therewith,</li>
            <li>potentially multilingual,</li>
            <li>self-contained documents and therewith reproducible.</li>
        </ul>
            
        <p>Therefore we wrote this small script, integrating freeing you of caring much about the necessary syntax details.</p>
        
        <p>Your feedback or contributions are very welcome. Please use <a href="/ifl-geovis/Leaflet.annotate">this issue tracker</a> to report any issues you experienced with it.</p>

        <h1>Example Maps</h1>
        <p>
          <a href="/Leaflet.annotate/example/paris/">Public Sculptures in Paris with a Picture in Wikidata</a>
          In this first example i just blatantly highlight data representing public sculptures in the city of Paris. All web map elements are annotated as representing a <a href="http://schema.org/Photograph">Photographs</a> depicting a specific <a href="http://schema.org/contentLocation">contentLocation</a>.
        </p>
        <p>
          Here is the Leaflet code which produces the semantic markup explorable in the example. Bold elements are interpreted by the annotate plugin to produce proper markup.
        </p>
        <pre>
var photo = L.circleMarker(coordinates, { keepInView: true,
className: 'sculpture-photo', maxWidth: "auto",
alt: "Place of a sculpture named " + popupTitle,
<b>itemtype: 'Photograph', geoprop: 'contentLocation',
url: photoURL, title: 'Picture of ' + popupTitle</b>
}).setRadius(3)
        </pre>
        <p>
          If you copy & paste the <em>generated</em> markup into Googles Structured Data Testing Tool you will find out that it can identify/recognize ~400pictures were composed in this map.
        </p>
        <p>
          The data for this map is fetched live with SPARQL from <a href="http://query.wikidata.org">query.wikidata.org</a>. Sculptures are shown when they are located in <a href="https://www.wikidata.org/wiki/Q90">Paris</a> (or one of its districts) and have a publicly licensed picture associated in wikmedia commons. The semantic annotation of the <em>CircleMarker</em> elements here happens in the SVG fragment created by Leaflet and, according to the standard, in a <em>metadata</em> element.
        </p>


        <h1>Overview &amp; installation</h1>
        
        <p>The source code released contains two different components, one (the core) for generating the semantic markup and the other (an example) for reading and making the markup usable for visitors who want to systematically read and explore the map<p>
        
        <ol>
          <li>
            The <b>core</b> file is the semantic markup generating Leaflet Plugin in<p><code><b>Leaflet.annotate.Microdata.js</b></code></p>
            <p>After loading this script you can start annotating <em>Marker, CircleMarker, Popup, ImageOverlay</em> and <em>GeoJSON</em> elements.</p>
            </li>
          <li>
            The <b>first add-on</b> is a custom <em>L.control</em> which uses the semantic markup generated by the core, it can be installed through loading <p><code><b>Leaflet.annotate.Viewer.js</b></code></p>
            <p>Using this add-on you can add a text based search control to your map allowing readers of it to magically <em>list</em>, <em>search</em> and <em>focus</em> all your annotated web map elements.</p>
          </li>
        </ol>
        
        <p>
          Furthermore, to assist everyone in the creation of valid semantic markup, you as a developer can use one of our existing JavaScript object to map user input to valid Schema.org type names (=Leaflet.annotate's <code>itemtype</code> option). Currently available are:
        </p>
        <ul>
          <li><code>Leaflet.annotate.types.en_US.js</code></li>
          <li><code>Leaflet.annotate.types.de_DE.js</code></li>
        </ul>

        <h1>Usage</h1>

        <h2>Automatic Annotation</h2>

        <p>
          Annotation happens automatically whenever you add a <b>Marker</b>, <b>CircleMarker</b>, <b>Popup</b> or <b>ImageOverlay</b> to your <code>L.map</code> <em>and</em> pass them a valid <code>itemtype</code> value as an option to Leaflets Standard API:</p>
<pre>
L.marker(coordinates, {
  title: 'Madison Square Garden', <b>itemtype: 'CivicStructure'</b>
})
</pre>
        <p>
          Valid itemtype values are currently all the names of Schema.org terms which allow for at least one Place as one of their properties.
          Regarding the schema.org type you use you might be required to explicitly specify the desired <code>geoprop</code> option
        </p>
<pre>
L.circleMarker(coordinates, { title: 'The Catcher in the Rye',
  itemtype: 'Book', <b>geoprop: 'locationCreated'</b>,
  sameAs: '<a href="https://www.wikidata.org/wiki/Q183883">https://www.wikidata.org/wiki/Q183883</a>'
})
</pre>
        <p>
          For example when mapping CreativeWorks you can express a geographical dimension for the location it was created (locationCreated) or for the location it depicts (contentLocation) using the respective property names.
        </p>

        Here is another, more comple example, annotating an ImageOverlay:
<pre>
L.imageOverlay(imageUrl, imageBounds, {
  <b>"itemtype": "CreativeWork", 
  "geoprop": "contentLocation",
  "publisher": "The University of Texas",
  "source": "https://www.lib.utexas.edu/maps/new_jersey.html",
  "created": "Thu Jan 01 1920 01:00:00 GMT+0100 (CET)"</b>
  "title": "Automobile Blue Book",
}).addTo(map)
</pre>

        <h2>Manual Annotation</h2>

        <p>
          On a GeoJSON element annotation happens whenever you call the .annotate() method on the GeoJSON layer and pass a valid code>itemtype</code> value as an option:
        </p>
<pre>
L.geoJson(geojsonData, {
  title: „Uganda“ itemtype: 'Country',
  sameAs: '<a href="https://www.wikidata.org/wiki/Q1036">https://www.wikidata.org/wiki/Q1036</a>'
})<b>.annotate()</b>
</pre>
        <p>
          This will markup the GeoJSON document as a map overlay representing the area for the Republic of Uganda. In Wikidata the URI for the concept/entity representing this country is https://www.wikidata.org/wiki/Q1036.
        </p>

        <p>Another example of a semantically annotated GeoJSON overlay where the options used by Leaflet.annnotate to generate the semantic markup are highlighted in bold:</p>
<pre>
var statesBoundaries = L.geoJson(geoJsonData, {
    title: 'Charmingly Inaccurate - USA', <b>itemtype: 'Country',
    description: 'A caricature of the lower 48 United States, '
      + 'this linework set is recognizable and friendly, but not concerned with ....” '
      + 'It’s that friend you have who’s always embellishing his stories. You never '
      + 'mind his lying, though, because the exaggerations make things more fun. '
      + 'Go ahead, enjoy the story your map is telling. (Version 1.1)',
    creator: 'Daniel P. Huffmann', publisher: 'Daniel P. Huffmann',
    published: '10/04/2013', modified: '10/04/2013',
    created: '3/24/2013', rights: 'Public Domain',
    derivedFrom: 'Derived from a 1920 broadside map entitled “The Rights of the People—Women'
      + 'are People: Suffrage Victory Map.” Equal Suffrage League of Virginia Papers, Acc. 22002, '
      + 'Library of Virginia.'</b>}).addTo(map)
statesBoundaries<b>.annotate()</b>
</pre>

    <h2>API Documentation</h2>

    <p>
      You can find all options with which the Leaflet.annotate plugins extends the Standard API documented in the <a href="https://github.com/ifl-geovis/Leaflet.annotate#api" title="Link to the annotate API Docs">API section of the projects README</a>.
    </p>

      </section>
      <footer>
        <p>This project is maintained by <a href="http://github.com/mukil">Malte Rei&szlig;ig</a> and is funded in parts by the research project <a href="https://www.ifl-leipzig.de/en/research/project/detail/demokratisierung_von_expertenwissen.html" title="DvEW Project Page">Democratisation of Expert Knowledge</a> at the <a href="http://www.ifl-leipzig.de">IfL</a> in Leipzig.</p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
  </body>
</html>
