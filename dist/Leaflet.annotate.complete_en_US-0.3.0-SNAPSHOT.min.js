/**
    This is leaflet.annotate-0.3.0-SNAPSHOT
    Author: Malte ReiÃŸig 
    Project Page: https://mukil.github.io/Leaflet.annotate 
    API Documentation:, https://github.com/mukil/Leaflet.annotate#readme **/

!function(){function a(a){return f.hasOwnProperty(a)}function b(a){return g.hasOwnProperty(a)}var c={annotate:function(){var a=this._getTargetDOMElement();return a?this._buildAnnotations(a):(this.on("add",function(){a=this._getTargetDOMElement(),this._buildAnnotations(a)}),this.on("open",function(){a=this._getTargetDOMElement(),this._buildAnnotations(a)}),this.on("load",function(b){a=this._getTargetDOMElement(),this._buildAnnotations(a)}),this.on("close",function(){var a=[];this._findPopupContainerElement(this,a),this._container=a[0]})),this},_findPopupContainerElement:function(a,b){var c=a._container.childNodes;for(var d in c){var a=c[d];if(a.className.indexOf("leaflet-popup")!=-1)return a}},_findContainerElements:function(a,b){if(a._container&&b.push(a._container),a._layers)for(var c in a._layers){var d=a._layers[c];this._findContainerElements(d,b)}},_findSVGGroupElements:function(a,b){if(a._container&&"g"===a._container.localName&&b.push(a),a._layers)for(var c in a._layers){var d=a._layers[c];this._findSVGGroupElements(d,b)}},_buildPolygonArray:function(a){var b=[];for(var c in a)b.push(a[c].lat),b.push(a[c].lng);return b},_createMetaElement:function(a,b,c){var d=void 0;return c?(d=d=document.createElement("desc"),d.setAttribute(a,b)):(d=document.createElement("meta"),d.setAttribute(a,b)),d},_createSVGTitleElement:function(a,b){var c=document.createElement("title");return c.setAttribute(a,b),c.innerText=b,c},_createGroupingElement:function(a,b,c){var d=document.createElement(a);return d.setAttribute(b,c),d},_buildAnnotations:function(a){"[object Array]"!==Object.prototype.toString.call(a)&&(a=[a]);var b=void 0,c=a[0],d=c.parentNode,e=this.options.hasOwnProperty("geoprop")?this.options.geoprop:"geo",f=this.options.hasOwnProperty("domId")?this.options.domId:void 0,g="g"===c.tagName,h=this.hasOwnProperty("_latlng"),i=this.hasOwnProperty("_bounds"),j=this.hasOwnProperty("_layers"),k=this._leaflet_id;if(!g&&this.options.hasOwnProperty("itemtype")){b=this._buildAnnotationsContainer("article",f,k),this._buildGenericProperties(b,this,g);var l=void 0;if(h&&!i)l=this._buildGeoAnnotation("div",this,"point",e,g);else{if(!i)return console.log("Invalid argument provided: Neither a BoundingBox nor a Coordinate Pair could be detected to build a geographic annotation."),void console.warn("Skipping semantic annotation of the following Leaflet item due to a previous error",this);l=this._buildGeoAnnotation("div",this,"box",e,g)}b.appendChild(l),b.appendChild(c),d.className.indexOf("overlay-pane")==-1&&d.className.indexOf("marker-pane")==-1&&(d.innerHTML=""),d.appendChild(b),this.options._annotated=!0}else if(g&&this.options.hasOwnProperty("itemtype")){if(j){var m=[];this._findSVGGroupElements(this,m);for(var n in m){var o=m[n],p=o._container,q=this._buildGeoAnnotation("g",o,"shape",e,g);b=this._buildAnnotationsContainer("metadata",f,o._leaflet_id),this._buildGenericProperties(b,this,g),b.appendChild(q),p.appendChild(b)}b=void 0}else{var q=this._buildGeoAnnotation("g",this,"point",e,g);b=this._buildAnnotationsContainer("metadata",f,k),this._buildGenericProperties(b,this,g),b.appendChild(q)}b&&(c.appendChild(b),this.options._annotated=!0)}},_buildAnnotationsContainer:function(a,b,c){var d=document.createElement(a);return b&&d.setAttribute("id",b),d.setAttribute("itemscope",""),d.setAttribute("itemtype","http://schema.org/"+this.options.itemtype),d.setAttribute("data-internal-leaflet-id",c),d},_buildGenericProperties:function(a,b,c){b.options.hasOwnProperty("title")&&this._appendMetaItempropContent(a,"name",b.options.title,c),b.options.hasOwnProperty("description")&&this._appendMetaItempropContent(a,"description",b.options.description,c),b.options.hasOwnProperty("url")&&this._appendMetaItempropContent(a,"url",b.options.url,c),b.options.hasOwnProperty("sameAs")&&this._appendMetaItempropContent(a,"sameAs",b.options.sameAs,c),b.options.hasOwnProperty("alternateName")&&this._appendMetaItempropContent(a,"alternateName",b.options.alternateName,c),b.options.hasOwnProperty("image")&&this._appendMetaItempropContent(a,"image",b.options.image,c),b.options.hasOwnProperty("creator")&&this._appendMetaNameContent(a,"http://purl.org/dc/elements/1.1/creator",b.options.creator,c),b.options.hasOwnProperty("contributor")&&this._appendMetaNameContent(a,"http://purl.org/dc/elements/1.1/contributor",b.options.contributor,c),b.options.hasOwnProperty("publisher")&&this._appendMetaNameContent(a,"http://purl.org/dc/elements/1.1/publisher",b.options.publisher,c),b.options.hasOwnProperty("published")&&this._appendMetaNameContent(a,"http://purl.org/dc/elements/1.1/date",b.options.published,c),b.options.hasOwnProperty("identifier")&&this._appendMetaNameContent(a,"http://purl.org/dc/elements/1.1/identifier",b.options.identifier,c),b.options.hasOwnProperty("rights")&&this._appendMetaNameContent(a,"http://purl.org/dc/elements/1.1/rights",b.options.rights,c),b.options.hasOwnProperty("derivedFrom")&&this._appendMetaNameContent(a,"http://purl.org/dc/elements/1.1/source",b.options.derivedFrom,c),b.options.hasOwnProperty("format")&&this._appendMetaNameContent(a,"http://purl.org/dc/elements/1.1/format",b.options.format,c),b.options.hasOwnProperty("language")&&this._appendMetaNameContent(a,"http://purl.org/dc/elements/1.1/language",b.options.language,c),b.options.hasOwnProperty("created")&&this._appendMetaNameContent(a,"http://purl.org/dc/terms/created",b.options.created,c),b.options.hasOwnProperty("modified")&&this._appendMetaNameContent(a,"http://purl.org/dc/terms/modified",b.options.modified,c)},_appendMetaNameContent:function(a,b,c,d){var e=this._createMetaElement("name",b,d);e.setAttribute("content",c,d),a.appendChild(e)},_appendMetaItempropContent:function(a,b,c,d){var e=void 0;"name"===b&&d?e=this._createSVGTitleElement(b,c):(e=this._createMetaElement("itemprop",b,d),e.setAttribute("content",c)),e&&a.appendChild(e)},_buildGeoAnnotation:function(c,d,e,f,g){if("object"!=typeof c&&(c=document.createElement(c)),a(d.options.itemtype))c.setAttribute("itemprop",f),this._buildGeographicIndicators(c,e,d,g);else if(b(f)){c.setAttribute("itemscope",""),c.setAttribute("itemtype","http://schema.org/Place"),c.setAttribute("itemprop",f);var h=this._createGroupingElement(c.localName,"itemprop","geo");this._buildGeographicIndicators(h,e,d,g),c.appendChild(h)}else console.warn("Could not build up geo annotations for "+d.options.itemtype+' and an undefined "geoproperty" value ');return c},_buildGeographicIndicators:function(a,b,c,d){if("shape"===b){a.setAttribute("itemtype","http://schema.org/GeoShape"),a.setAttribute("itemscope","");var e=this._createMetaElement("itemprop","polygon",d);e.setAttribute("content",this._buildPolygonArray(c._latlngs)),a.appendChild(e)}else if("point"===b){a.setAttribute("itemtype","http://schema.org/GeoCoordinates"),a.setAttribute("itemscope","");var f=this._createMetaElement("itemprop","latitude",d);f.setAttribute("content",c._latlng.lat);var g=this._createMetaElement("itemprop","longitude",d);g.setAttribute("content",c._latlng.lng),a.appendChild(f),a.appendChild(g)}else if("box"===b){a.setAttribute("itemtype","http://schema.org/GeoShape"),a.setAttribute("itemscope","");var e=this._createMetaElement("itemprop","box",d);e.setAttribute("content",c._bounds._southWest.lat+","+c._bounds._southWest.lng+" "+c._bounds._northEast.lat+","+c._bounds._northEast.lng),a.appendChild(e)}else console.warn("Unsupported type of geographic value indication, currently supported are 'point', 'box' and 'polygon'")}},d=L.Marker.prototype.onRemove;L.Marker.include(c),L.Marker.addInitHook(function(){this.annotate()}),L.Marker.include({_getTargetDOMElement:function(){return this._icon},onRemove:function(a){this.options._annotated&&(this._icon=this._icon.parentNode),d.call(this,a)}}),L.CircleMarker.include(c),L.CircleMarker.addInitHook(function(){this.annotate()}),L.CircleMarker.include({_getTargetDOMElement:function(){var a=[];return this._findContainerElements(this,a),a.length>0?a[0]:null}}),L.Popup.include(c),L.Popup.addInitHook(function(){this.annotate()});var e=L.Popup.prototype.onRemove;L.Popup.include({_getTargetDOMElement:function(){if(this.hasOwnProperty("_container"))return this._container},onRemove:function(a){this.options._annotated&&(this._container=this._container.parentNode),e.call(this,a)}}),L.LayerGroup.include(c),L.LayerGroup.addInitHook(function(){this.annotate()}),L.LayerGroup.include({_getTargetDOMElement:function(){var a=[];return this._findContainerElements(this,a),a.length>0?a[0]:null}}),L.ImageOverlay.include(c),L.ImageOverlay.addInitHook(function(){this.annotate()}),L.ImageOverlay.include({_getTargetDOMElement:function(){if(this.hasOwnProperty("_image"))return this._image}});var f={Place:{label:"Place",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Accommodation:{label:"Accommodation",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},AdministrativeArea:{label:"Administrative Area",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},City:{label:"City",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Country:{label:"Country",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},State:{label:"State",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},CivicStructure:{label:"Civic Structure",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Airport:{label:"Airport",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Aquarium:{label:"Aquarium",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Beach:{label:"Beach",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Bridge:{label:"Bridge",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},BusStation:{label:"Bus Station",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},BusStop:{label:"Bus Stop",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Campground:{label:"Campground",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Cemetery:{label:"Cemetery",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Crematorium:{label:"Crematorium",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},EventVenue:{label:"Event Venue",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},FireStation:{label:"Fire Station",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},GovernmentBuilding:{label:"Government Building",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Hospital:{label:"Hospital",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},MovieTheater:{label:"Movie Theater",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Museum:{label:"Museum",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},MusicVenue:{label:"Music Venue",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Park:{label:"Park",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},ParkingFacility:{label:"Parking Facility",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},PerformingArtsTheater:{label:"Performing Arts Theater",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},PlaceOfWorship:{label:"Place of Worship",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Playground:{label:"Playground",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},PoliceStation:{label:"Police Station",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},RVPark:{label:"RVPark",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},StadiumOrArena:{label:"Stadium or Arena",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},SubwayStation:{label:"Subway Station",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},TaxiStand:{label:"Taxi Stand",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},TrainStation:{label:"Train Station",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Zoo:{label:"Zoo",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},LandmarksOrHistoricalBuildings:{label:"Landmarks or Historical Buildings",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Landform:{label:"Landform",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},BodyOfWater:{label:"Body of Water",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Continent:{label:"Continent",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Mountain:{label:"Mountain",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Volcano:{label:"Volcano",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},LocalBusiness:{label:"Local Business",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},AnimalShelter:{label:"Animal Shelter",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},AutomotiveBusiness:{label:"Automotive Business",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},ChildCare:{label:"Child Care",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Dentist:{label:"Dentist",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},DryCleaningOrLaundry:{label:"Dry, Cleaning Or Laundry",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},EmergencyService:{label:"Emergency Service",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},EmploymentAgency:{label:"Employment Agency",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},EntertainmentBusiness:{label:"Entertainment Business",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},AdultEntertainment:{label:"Adult Entertainment",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},AmusementPark:{label:"Amusement Park",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},ArtGallery:{label:"Art Gallery",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Casino:{label:"Casino",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},ComedyClub:{label:"Comedy Club",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},NightClub:{label:"Night Club",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},FinancialService:{label:"Financial Service",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},AccountingService:{label:"Accounting Service",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},AutomatedTeller:{label:"Automated Teller",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},BankOrCreditUnion:{label:"Bank or Credit Union",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},InsuranceAgency:{label:"Insurance Agency",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},FoodEstablishment:{label:"Food Establishment",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Bakery:{label:"Bakery",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},BarOrPub:{label:"Bar or Pub",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Brewery:{label:"Brewery",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},CafeOrCoffeeShop:{label:"Cafe or Coffee Shop",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},FastFoodRestaurant:{label:"Fast Food Restaurant",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},IceCreamShop:{label:"Ice Cream Shop",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Restaurant:{label:"Restaurant",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Winery:{label:"Winery",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Distillery:{label:"Distillery",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},GovernmentOffice:{label:"Government Office",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},PostOffice:{label:"Post Office",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},HealthAndBeautyBusiness:{label:"Health and Beauty Business",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},HomeAndConstructionBusiness:{label:"Home and Construction Business",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Electrician:{label:"Electrician",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},GeneralContractor:{label:"General Contractor",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},HVACBusiness:{label:"HVAC Business",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},HousePainter:{label:"House Painer",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Locksmith:{label:"Locksmith",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},MovingCompany:{label:"Moving Company",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Plumber:{label:"Plumber",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},RoofingContractor:{label:"Roofing Contractor",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},InternetCafe:{label:"Internet Cafe",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},LegalService:{label:"Legal Service",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Attorney:{label:"Attorney",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Notary:{label:"Notary",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Library:{label:"Library",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},LodgingBusiness:{label:"Lodging Business",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},ProfessionalService:{label:"Professional Service",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},RadioStation:{label:"Radio Station",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},RealEstateAgent:{label:"Real Estate Agent",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},RecyclingCenter:{label:"Recycling Center",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},SelfStorage:{label:"Self Storage",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},ShoppingCenter:{label:"Shopping Center",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},SportsActivityLocation:{label:"Sports Activity Location",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},BowlingAlley:{label:"Bowling Alley",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},ExerciseGym:{label:"Exercise Gym",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},HealthClub:{label:"Health Club",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},PublicSwimmingPool:{label:"Public Swimming Pool",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},SkiResort:{label:"Ski Resort",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},SportsClub:{label:"Sports Club",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},TennisComplex:{label:"Tennis Complex",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Store:{label:"Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},AutoPartsStore:{label:"Auto Parts Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},BikeStore:{label:"Bike Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},BookStore:{label:"Book Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},ClothingStore:{label:"Clothing Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},ComputerStore:{label:"Computer Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},ConvenienceStore:{label:"Convenience Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},DepartmentStore:{label:"Department Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},ElectronicsStore:{label:"Electronics Store Service",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Florist:{label:"Florist",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},FurnitureStore:{label:"Furniture Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},GardenStore:{label:"Garden Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},GroceryStore:{label:"Grocery Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},HardwareStore:{label:"Hardware Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},HobbyShop:{label:"Hobby Shop",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},HomeGoodsStore:{label:"Home Goods Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},JewelryStore:{label:"Jewelry Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},LiquorStore:{label:"Liquor Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},MensClothingStore:{label:"Mens Clothing Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},MobilePhoneStore:{label:"Mobile Phone Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},MovieRentalStore:{label:"Movie Rental Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},MusicStore:{label:"Music Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},OfficeEquipmentStore:{label:"Office Equipment Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},OutletStore:{label:"Outlet Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},PawnShop:{label:"Pawn Shop",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},PetStore:{label:"Pet Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},ShoeStore:{label:"Shoe Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},SportingGoodsStore:{label:"Sporting Goods Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},TireShop:{label:"Tire Shop",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},ToyStore:{label:"Toy Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},WholesaleStore:{label:"Wholesale Store",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},TelevisionStation:{label:"Television Station",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},TourstInformationCenter:{label:"Tourst Information Center",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},TravelAgency:{label:"Travel Agency",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},Residence:{label:"Residence",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}},TouristAttraction:{label:"Tourist Attraction",validProperties:{containedInPlace:[],containsPlace:[],geo:[]}}},g={areaServed:{},availableAtOrFrom:{},birthPlace:{},containedInPlace:{},containsPlace:{},contentLocation:{},deathPlace:{},dropoffLocation:{},eligibleRegion:{},exerciseCourse:{},foodEstablishment:{},foundingLocation:{},fromLocation:{},gameLocation:{},geo:{},geographicArea:{},hasPOS:{},homeLocation:{},ineligibleRegion:{},jobLocation:{},location:{},locationCreated:{},pickupLocation:{},regionsAllowed:{},serviceLocation:{},spatialCoverage:{},toLocation:{},workLocation:{}}}();var SCHEMA_ORG="http://schema.org/",articleElements=[],metaElements=[],metadataElements=[],annotatedElements=[],typeCount=[];L.Control.AnnotationViewer=L.Control.extend({options:{position:"topright",placeholder:"Search..."},initialize:function(a){L.Util.setOptions(this,a)},onAdd:function(a){var b=L.DomUtil.create("div","annotation-viewer search-container");this.a=L.DomUtil.create("a","leaflet-control-annotation-viewer"),this.a.innerHTML='<img src="css/readerView-Icon-decentblue-transparent.png" title="Launch Annotation Reader">';var c=this._toggleAnnotationViewer,d=this;return this.a.onclick=function(a){c(d,b)},b.appendChild(this.a),b},onRemove:function(a){L.DomEvent.removeListener(this._input,"keyup",this.keyup,this),L.DomEvent.removeListener(form,"submit",this.submit,this)},keyup:function(a){if(38===a.keyCode||40===a.keyCode);else if(this.input.value.length>2){var b=this.input.value,c=this._searchAnnotationsByName(b);this._renderResultItems(c,this)}},typeGroupSelected:function(a){var b=this._buildTypeSearchResults(a.target["data-type-uri"]);this.results=document.querySelector(".list-group"),this._renderResultItems(b,this)},itemSelected:function(a){L.DomEvent.preventDefault(a);var b=a.target,c=(b.innerHTML,b.getAttribute("data-result-list-id")),d=Array.from(document.querySelectorAll('[data-internal-leaflet-id="'+c+'"]')),e=void 0;this.input.value=b.getAttribute("data-result-name");for(var f in d){var g=d[f];if(e=this._getCoordinatesOfFirstGeoChildProperty(g))break}if(!e||e.coordinates.length>=3)console.warn("Unsupported Coordinate Value Pair",e.coordinates,"currently just buonding box (2 values) or a Point (1 value) are supported");else if(1===e.coordinates.length){var h=e.coordinates[0];this._map.panTo(L.latLng(h.lat,h.lng))}else if(2===e.coordinates.length){var i=e.coordinates[0],j=e.coordinates[1],k=L.latLngBounds(i,j);this._map.fitBounds(k)}this._renderItemInfoFields(d)},submit:function(a){console.log("Submitted Query",a),L.DomEvent.preventDefault(a)},_renderItemInfoFields:function(a){console.log("Show Metadata for Map Element",a);var b=document.querySelector("div.form-group"),c=document.querySelector("div.metadata-group"),d=document.querySelector("div.list-group");if(null==c&&a[0].childNodes.length>0){c=L.DomUtil.create("div","metadata-group",b);var e=window.innerHeight-35,f=e/2;d.setAttribute("style","height:"+(f-35)+"px"),c.setAttribute("style","height: "+f+"px; min-height: "+f+"px"),L.DomEvent.addListener(c,"wheel",function(a){console.log("WheelScroll",a),L.DomEvent.preventDefault(a),L.DomEvent.stopPropagation(a)}),L.DomEvent.addListener(c,"drag",function(a){L.DomEvent.preventDefault(a),L.DomEvent.stopPropagation(a)})}c.innerHTML="";var g=void 0,h=a[0].getAttribute("itemtype");if(h){var i=h.substr(SCHEMA_ORG.length),j=this._createSpanInfoField("Type",i);c.appendChild(j),c.appendChild(document.createElement("br"))}for(var k in a[0].childNodes){var l=a[0].childNodes[k];if(l.attributes&&l.attributes.hasOwnProperty("content")){var m=l.getAttribute("name"),n=l.getAttribute("itemprop"),o=l.getAttribute("content"),p=void 0;"http://purl.org/dc/terms/created"===m?p=this._createSpanInfoField("Created",new Date(o)):"http://purl.org/dc/terms/modified"===m?p=this._createSpanInfoField("Modified",new Date(o)):"http://purl.org/dc/elements/1.1/date"===m?p=this._createSpanInfoField("Published",new Date(o)):"http://purl.org/dc/elements/1.1/creator"===m?p=this._createSpanInfoField("Creator",o):"http://purl.org/dc/elements/1.1/contributor"===m?p=this._createSpanInfoField("Contributor",o):"http://purl.org/dc/elements/1.1/publisher"===m?p=this._createSpanInfoField("Publisher",o):"http://purl.org/dc/elements/1.1/rights"===m?p=this._createSpanInfoField("Usage Rights",o):"http://purl.org/dc/elements/1.1/source"===m?p=this._createSpanInfoField("Source",o):"url"===n?g=o:"description"===n&&(p=this._createSpanInfoField(void 0,"<p>"+o+"</p>")),p&&(c.appendChild(p),c.appendChild(document.createElement("br")))}}g&&(p=document.createElement("a"),p.text="Browse Source",p.setAttribute("href",g),p.setAttribute("class","metadata-field datasource"),p.setAttribute("title","Visit the source of information for this web map element"),c.appendChild(p))},_createSpanInfoField:function(a,b){if(field=document.createElement("div"),field.setAttribute("class","metadata-field"),a){var c=document.createElement("span");c.setAttribute("class","header"),c.innerHTML=a,field.appendChild(c)}var d=document.createElement("span");return d.setAttribute("class","value"),d.innerHTML=b,field.appendChild(d),field},_renderResultItems:function(a,b){var c=window.innerHeight-35,d=c-35,e=document.querySelector("div.metadata-group");if(null!=e&&(d-=c/2),b.containerRef.setAttribute("style","height:"+c+"px"),b.results.setAttribute("style","height:"+d+"px"),b.results.innerHTML="",a.length>0){var f=a[0];f.type?b.results.innerHTML='<span class="header">'+a.length+"x "+f.type+"</span>":b.results.innerHTML='<span class="header">'+a.length+" items found</span>"}for(var g in a){var h=a[g],i=L.DomUtil.create("a","list-group-item");i.href="",i.title='Focus "'+h.name+'" ('+h.leafletId+") in map",i.setAttribute("data-result-parent-item-type",h.type),i.setAttribute("data-result-name",h.name),i.setAttribute("data-result-list-id",h.leafletId),i.innerHTML=h.name,b.results.appendChild(i),L.DomEvent.addListener(i,"click",b.itemSelected,b),L.DomEvent.disableClickPropagation(i)}L.DomEvent.addListener(b.results,"wheel",function(a){a.target.className.indexOf("list-group-item")!=-1&&(a.target.parentNode.scrollTop+=a.deltaY),L.DomEvent.preventDefault(a),L.DomEvent.stopPropagation(a)},b)},_toggleAnnotationViewer:function(a,b){if(1===b.children.length){a._buildAnnotatedElementsCache(),b.children[0].innerHTML="X";for(var c in typeCount){var d=c.slice(SCHEMA_ORG.length),e=L.DomUtil.create("a","type-group-item");e.href="#"+d,e["data-type-uri"]=c,e.title='Show all items of type "'+d+'"',e.innerHTML=typeCount[c].count,b.appendChild(e),L.DomEvent.addListener(e,"click",a.typeGroupSelected,a),L.DomEvent.disableClickPropagation(e)}a.form=L.DomUtil.create("form","form",b);var f=L.DomUtil.create("div","form-group",a.form);a.input=L.DomUtil.create("input","form-control input-sm",f),a.input.type="text",a.input.placeholder=a.options.placeholder,a.input.focus(),a.results=L.DomUtil.create("div","list-group",f),a.containerRef=b,L.DomUtil.addClass(b,"selected"),L.DomEvent.addListener(a.input,"keyup",a.keyup,a),L.DomEvent.addListener(a.form,"submit",a.submit,a)}else{b.children[0].innerHTML='<img src="css/readerView-Icon-decentblue-transparent.png" title="Launch Annotation Reader">';var g=Array.from(b.children);for(var h in g)"form"!==g[h].localName&&g[h].className.indexOf("type-group-item")==-1||b.removeChild(g[h]);L.DomUtil.removeClass(b,"selected")}},_buildAnnotatedElementsCache:function(){articleElements=Array.from(document.querySelectorAll("article")),metaElements=Array.from(document.querySelectorAll("meta")),metadataElements=Array.from(document.querySelectorAll("metadata")),typeCount=[];for(var a in articleElements){var b=articleElements[a].getAttribute("itemtype");annotatedElements.push(articleElements[a]),this._countTypeInstances(b)}for(var c in metadataElements){var d=metadataElements[c].getAttribute("itemtype");annotatedElements.push(metadataElements[c]),this._countTypeInstances(d)}console.log("Repopulating Annotated Elements Cache, Found",metaElements.length,"annotations over",articleElements.length+metadataElements.length,"elements overall (",articleElements.length,"article and",metadataElements.length,"metadata elements)")},_countTypeInstances:function(a){void 0===typeCount[a]?typeCount[a]={count:1}:typeCount[a]={count:typeCount[a].count+1}},_buildTypeSearchResults:function(a){var b=[],c=Array.from(document.querySelectorAll('[itemtype="'+a+'"]'));for(var d in c){var e=Array.from(c[d].children),f={name:"No name given",type:a.slice(SCHEMA_ORG.length),node:c[d],leafletId:c[d].getAttribute("data-internal-leaflet-id")};for(var g in e){var h=e[g],i=h.getAttribute("itemprop");h.getAttribute("name");if(h.attributes.hasOwnProperty("content")){var j=h.getAttribute("content");"name"===i&&j.length>0?f.name=j:"sameAs"===i?f.sameAs=j:"url"===i&&(f.url=j)}}this._addToResults(b,f)}return b},_getCoordinatesOfFirstGeoChildProperty:function(a){var b=Array.from(a.children);for(var c in b){var d=b[c],e=d.getAttribute("itemprop"),f={};if("geo"===e||"location"===e||"birthPlace"===e||"deathPlace"===e||"contentLocation"===e||"locationCreated"===e||"homeLocation"===e||"workLocation"===e)return f.property=e,f.coordinates=this._parseGeoCoordinateValuePairs(d),f}},_parseGeoCoordinateValuePairs:function(a){var b=a.getAttribute("itemtype"),c=[];"http://schema.org/GeoCoordinates"===b?c=Array.from(a.children):"http://schema.org/Place"===b?c=Array.from(a.children[0].children):console.warn("Focussing Geo Shape values or other itemtypes than Place and GeoCoordinates - NOT YET IMPLEMENTED");var d=[],e={};for(var f in c){var g=c[f],h=g.getAttribute("itemprop");"latitude"===h?e.lat=g.getAttribute("content"):"longitude"===h&&(e.lng=g.getAttribute("content"));
}if(e.hasOwnProperty("lat")&&e.hasOwnProperty("lng"))return d.push(e),d;for(var f in c){var g=c[f],h=g.getAttribute("itemprop");if("box"===h){var i=g.getAttribute("content"),j=i.split(" ")[0],k=i.split(" ")[1];d.push({lat:j.split(",")[0],lng:j.split(",")[1]}),d.push({lat:k.split(",")[0],lng:k.split(",")[1]})}}return d},_searchAnnotationsByName:function(a){var b=[];for(var c in metaElements){var d=metaElements[c],e=d.getAttribute("itemprop"),f=d.getAttribute("name");if("name"===e||"description"===e||"http://purl.org/dc/elements/1.1/creator"===f){var g=d.getAttribute("content");g.toLowerCase().indexOf(a.toLowerCase())!=-1&&(d.type=d.parentNode.getAttribute("itemtype").slice(SCHEMA_ORG.length),d.name=g,d.leafletId=d.parentNode.getAttribute("data-internal-leaflet-id"))}this._addToResults(b,d)}return b},_addToResults:function(a,b){for(var c in a){var d=a[c];if(d.leafletId===b.leafletId)return;if(d.hasOwnProperty("url")&&b.hasOwnProperty("url")&&d.url===b.url)return;if(d.hasOwnProperty("identifier")&&b.hasOwnProperty("identifier")&&d.identifier===b.identifier)return;if(d.hasOwnProperty("sameAs")&&b.hasOwnProperty("sameAs")&&d.sameAs===b.sameAs)return}a.push(b)}}),L.control.annotationViewer=function(a,b){return new L.Control.AnnotationViewer(a,b)};